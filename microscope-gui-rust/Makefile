# Rust Microscope GUI Makefile

.PHONY: help install build run release clean test deps

help:
	@echo "ğŸ¦€ Rust Microscope GUI Project"
	@echo ""
	@echo "Available commands:"
	@echo "  deps     - Install system dependencies"
	@echo "  build    - Debug build"
	@echo "  release  - Release build"
	@echo "  run      - Run application (debug)"
	@echo "  run-rel  - Run application (release)"
	@echo "  test     - Run tests"
	@echo "  clean    - Clean build files"
	@echo "  install  - Install to system"

deps:
	@echo "ğŸ”§ Installing system dependencies..."
	./install_deps.sh

build:
	@echo "ğŸ”¨ Building debug version..."
	cargo build

release:
	@echo "ğŸš€ Building release version..."
	cargo build --release

run:
	@echo "â–¶ï¸  Running application (debug)..."
	RUST_LOG=info cargo run

run-rel:
	@echo "â–¶ï¸  Running application (release)..."
	RUST_LOG=info cargo run --release

test:
	@echo "ğŸ§ª Running tests..."
	cargo test

clean:
	@echo "ğŸ§¹ Cleaning build files..."
	cargo clean

install: release
	@echo "ğŸ“¦ Installing to system..."
	sudo cp target/release/microscope-gui-rust /usr/local/bin/
	@echo "âœ… Installation complete! Run with 'microscope-gui-rust' command."

# Developer commands
dev: build run

check:
	@echo "ğŸ” Checking code..."
	cargo check
	cargo clippy -- -D warnings
	cargo fmt --check

format:
	@echo "ğŸ¨ Formatting code..."
	cargo fmt

# Cross-compilation (optional)
build-windows:
	@echo "ğŸªŸ Building for Windows..."
	cargo build --release --target x86_64-pc-windows-gnu

build-macos:
	@echo "ğŸ Building for macOS..."
	cargo build --release --target x86_64-apple-darwin